<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3600813755953882" crossorigin="anonymous"></script>
    <meta name="robots" content="max-image-preview:large">
    <meta name="theme-color" content="#1a1a2e">
    <meta name="description" content="ì¢Œìš° ì™•ë³µí•˜ëŠ” ë¸”ë¡ì„ ì •í™•í•œ íƒ€ì´ë°ì— ë–¨ì–´ëœ¨ë ¤ íƒ‘ì„ ìŒ“ëŠ” íƒ€ì´ë° ì•„ì¼€ì´ë“œ ê²Œì„ì…ë‹ˆë‹¤.">

    <!-- Open Graph -->
    <meta property="og:title" content="Stack Tower - íƒ€ì´ë° ì•„ì¼€ì´ë“œ ê²Œì„">
    <meta property="og:description" content="ë¸”ë¡ì„ ì •í™•í•œ íƒ€ì´ë°ì— ë–¨ì–´ëœ¨ë ¤ íƒ‘ì„ ìŒ“ì•„ë³´ì„¸ìš”!">
    <meta property="og:type" content="game">
    <meta property="og:url" content="https://dopabrain.com/stack-tower/">
    <meta property="og:image" content="https://dopabrain.com/stack-tower/icon-512.svg">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Stack Tower - íƒ€ì´ë° ì•„ì¼€ì´ë“œ ê²Œì„">
    <meta name="twitter:description" content="ë¸”ë¡ì„ ì •í™•í•œ íƒ€ì´ë°ì— ë–¨ì–´ëœ¨ë ¤ íƒ‘ì„ ìŒ“ì•„ë³´ì„¸ìš”!">
    <meta name="twitter:image" content="https://dopabrain.com/stack-tower/icon-512.svg">

    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "Stack Tower",
        "description": "íƒ€ì´ë° ì•„ì¼€ì´ë“œ ê²Œì„",
        "url": "https://dopabrain.com/stack-tower/",
        "image": "https://dopabrain.com/stack-tower/icon-512.svg",
        "applicationCategory": "Game",
        "genre": "Arcade"
    }
    </script>

    <link rel="canonical" href="https://dopabrain.com/stack-tower/">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="icon-192.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <link rel="stylesheet" href="css/style.css">

    <title>Stack Tower - íƒ€ì´ë° ì•„ì¼€ì´ë“œ ê²Œì„</title>
</head>
<body>
    <!-- Sound Toggle -->
    <button class="sound-toggle" id="sound-toggle" onclick="if(window.sfx)window.sfx.init();const enabled=window.sfx?window.sfx.toggle():false;this.textContent=enabled?'ğŸ”Š':'ğŸ”‡';" title="Toggle Sound">ğŸ”Š</button>

    <!-- Language Selector -->
    <div class="language-selector">
        <button class="lang-btn" id="langBtn" title="Language">ğŸŒ</button>
        <div class="lang-menu hidden" id="langMenu">
            <button class="lang-option active" data-lang="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
            <button class="lang-option" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
            <button class="lang-option" data-lang="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
            <button class="lang-option" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
            <button class="lang-option" data-lang="pt">ğŸ‡§ğŸ‡· PortuguÃªs</button>
            <button class="lang-option" data-lang="zh">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</button>
            <button class="lang-option" data-lang="id">ğŸ‡®ğŸ‡© Bahasa Indonesia</button>
            <button class="lang-option" data-lang="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
            <button class="lang-option" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</button>
            <button class="lang-option" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
            <button class="lang-option" data-lang="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
            <button class="lang-option" data-lang="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
        </div>
    </div>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J8GSWM40TV"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-J8GSWM40TV', { 'anonymize_ip': true });
    </script>

    <div id="app" class="app">
        <!-- Main Screen -->
        <div id="mainScreen" class="screen active">
            <div class="main-container">
                <h1 class="title" data-i18n="menu.title">ìŠ¤íƒ íƒ€ì›Œ</h1>
                <p class="subtitle" data-i18n="menu.subtitle">ì •í™•í•œ íƒ€ì´ë°ìœ¼ë¡œ íƒ‘ì„ ìŒ“ì•„ë³´ì„¸ìš”!</p>

                <div class="stats-card">
                    <div class="stat-item">
                        <div class="stat-label" data-i18n="menu.maxFloor">ìµœê³  ì¸µìˆ˜</div>
                        <div class="stat-value" id="maxFloor">0</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label" data-i18n="menu.maxScore">ìµœê³  ì ìˆ˜</div>
                        <div class="stat-value" id="maxScore">0</div>
                    </div>
                </div>

                <div class="badges-container">
                    <div class="current-badge">
                        <div class="badge-label" data-i18n="menu.currentBadge">í˜„ì¬ ì¹­í˜¸</div>
                        <div class="badge-name" id="currentBadge">ìŒ“ê¸° ì…ë¬¸ì</div>
                    </div>
                </div>

                <div class="button-group">
                    <button id="startBtn" class="btn btn-primary" data-i18n="menu.startGame">ê²Œì„ ì‹œì‘</button>
                    <button id="skinsBtn" class="btn btn-secondary" data-i18n="menu.skins">ìŠ¤í‚¨</button>
                    <button id="leaderboardBtn" class="btn btn-secondary" data-i18n="menu.stats">í†µê³„</button>
                </div>

                <a href="https://dopabrain.com/portal/" class="home-link" data-i18n="menu.home">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14"><path d="m15 18-6-6 6-6"></path></svg>
                    DopaBrain í™ˆ
                </a>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-header">
                <div class="game-info">
                    <div class="info-item">
                        <span class="info-label" data-i18n="game.floor">ì¸µìˆ˜</span>
                        <span class="info-value" id="floorDisplay">1</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" data-i18n="game.score">ì ìˆ˜</span>
                        <span class="info-value" id="scoreDisplay">0</span>
                    </div>
                </div>
            </div>

            <!-- Top Banner Ad -->
            <div class="ad-container ad-top" style="display:none;">
                <span>AD</span>
            </div>

            <canvas id="gameCanvas" class="game-canvas"></canvas>
            <div id="tap-hint" class="tap-hint" style="display:none;" data-i18n="game.tapToStart">ğŸ‘† íƒ­í•˜ì—¬ ì‹œì‘</div>
            <div id="hud-combo" class="hud-combo hidden"></div>

            <!-- Power Up Buttons -->
            <div class="powerup-container">
                <button class="powerup-btn" id="slowBtn" title="ìŠ¬ë¡œìš° ëª¨ì…˜">
                    <span class="powerup-icon">â±ï¸</span>
                    <span class="powerup-label" data-i18n="game.slowMotion">ìŠ¬ë¡œìš°</span>
                </button>
                <button class="powerup-btn" id="hintBtn" title="íŒíŠ¸">
                    <span class="powerup-icon">ğŸ’¡</span>
                    <span class="powerup-label" data-i18n="game.hint">íŒíŠ¸</span>
                </button>
            </div>

            <!-- Bottom Banner Ad -->
            <div class="ad-container ad-bottom" style="display:none;">
                <span>AD</span>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen">
            <div class="game-over-container">
                <h2 class="game-over-title" data-i18n="game.gameOver">ê²Œì„ ì˜¤ë²„!</h2>

                <div class="result-stats">
                    <div class="result-item">
                        <span class="result-label" data-i18n="game.finalFloor">ìµœì¢… ì¸µìˆ˜</span>
                        <span class="result-value" id="finalFloor">0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label" data-i18n="game.acquiredScore">íšë“ ì ìˆ˜</span>
                        <span class="result-value" id="finalScore">0</span>
                    </div>
                    <div class="result-item">
                        <span class="result-label" data-i18n="game.perfectTiming">ì™„ë²½ íƒ€ì´ë°</span>
                        <span class="result-value" id="perfectCount">0</span>
                    </div>
                </div>

                <div id="adContainer" class="ad-container ad-game-over"></div>

                <div id="countdownContainer" style="display: none;" class="countdown">
                    <span data-i18n="game.adLoading">ê´‘ê³  ë¡œë”© ì¤‘...</span> (<span id="countdown">5</span>s)
                </div>

                <div class="result-buttons">
                    <button id="reviveGameBtn" class="btn btn-primary" data-i18n="game.reviveGame">ë¶€í™œí•˜ê¸°</button>
                    <button id="restartBtn" class="btn btn-secondary" data-i18n="game.restart">ë‹¤ì‹œ ì‹œì‘</button>
                    <button id="shareBtn" class="btn btn-tertiary" data-i18n="game.share">ê³µìœ í•˜ê¸°</button>
                </div>

                <button id="mainMenuBtn" class="btn btn-text" data-i18n="game.mainMenu">ë©”ì¸ ë©”ë‰´</button>

                <div class="recommendations-section">
                    <div class="rec-title" data-i18n="game.recommendations">ì´ê²ƒë„ í•´ë³´ì„¸ìš”</div>
                    <div class="rec-grid">
                        <a href="https://dopabrain.com/number-puzzle/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸ”¢</span>
                            <span class="rec-info">
                                <span class="rec-name">2048 í¼ì¦</span>
                                <span class="rec-desc">ìˆ«ì í•©ì¹˜ê¸° ê²Œì„</span>
                            </span>
                        </a>
                        <a href="https://dopabrain.com/sky-runner/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸš€</span>
                            <span class="rec-info">
                                <span class="rec-name">Sky Runner</span>
                                <span class="rec-desc" data-i18n="rec.skyRunnerDesc">ìš°ì£¼ ë¹„í–‰ ì•„ì¼€ì´ë“œ ê²Œì„!</span>
                            </span>
                        </a>
                        <a href="https://dopabrain.com/zigzag-runner/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸƒ</span>
                            <span class="rec-info">
                                <span class="rec-name">Zigzag Runner</span>
                                <span class="rec-desc" data-i18n="rec.zigzagDesc">ë°©í–¥ ì „í™˜ ì•„ì¼€ì´ë“œ ê²Œì„!</span>
                            </span>
                        </a>
                        <a href="https://dopabrain.com/emoji-merge/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸ§¬</span>
                            <span class="rec-info">
                                <span class="rec-name" data-i18n="rec.emojiMergeName">ì´ëª¨ì§€ ë¨¸ì§€</span>
                                <span class="rec-desc" data-i18n="rec.emojiMergeDesc">ì´ëª¨ì§€ í•©ì³ ì§„í™”ì‹œí‚¤ê¸°!</span>
                            </span>
                        </a>
                        <a href="https://dopabrain.com/white-noise/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸŒ™</span>
                            <span class="rec-info">
                                <span class="rec-name">ë°±ìƒ‰ì†ŒìŒ í”Œë ˆì´ì–´</span>
                                <span class="rec-desc">ì§‘ì¤‘Â·ìˆ˜ë©´Â·ëª…ìƒ ìŒì•…</span>
                            </span>
                        </a>
                        <a href="https://dopabrain.com/lottery/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸ€</span>
                            <span class="rec-info">
                                <span class="rec-name">ë¡œë˜ ë²ˆí˜¸ ìƒì„±ê¸°</span>
                                <span class="rec-desc">í–‰ìš´ì˜ ë²ˆí˜¸ ì¶”ì²œ!</span>
                            </span>
                        </a>
                        <a href="https://dopabrain.com/color-memory/" class="rec-card" target="_blank">
                            <span class="rec-icon">ğŸ¨</span>
                            <span class="rec-info">
                                <span class="rec-name" data-i18n="rec.colorMemoryName">ìƒ‰ìƒ ê¸°ì–µë ¥</span>
                                <span class="rec-desc" data-i18n="rec.colorMemoryDesc">ê¸°ì–µë ¥ ë„ì „ ê²Œì„</span>
                            </span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Skin Selection Screen -->
        <div id="skinScreen" class="screen">
            <div class="skin-container">
                <h2 class="skin-title" data-i18n="skins.title">ë¸”ë¡ í…Œë§ˆ ì„ íƒ</h2>

                <div class="skin-grid" id="skinGrid">
                    <!-- Skins will be generated by JavaScript -->
                </div>

                <button id="skinBackBtn" class="btn btn-secondary" data-i18n="skins.back">ë’¤ë¡œ</button>
            </div>
        </div>

        <!-- Leaderboard Screen -->
        <div id="leaderboardScreen" class="screen">
            <div class="leaderboard-container">
                <h2 class="leaderboard-title" data-i18n="leaderboard.title">í†µê³„</h2>

                <div class="leaderboard-tabs">
                    <button class="tab-btn active" data-tab="badges" data-i18n="leaderboard.badges">ì¹­í˜¸</button>
                    <button class="tab-btn" data-tab="stats" data-i18n="leaderboard.stats">í†µê³„</button>
                </div>

                <div id="badgesContent" class="tab-content active">
                    <div id="badgesList" class="badges-list">
                        <!-- Badges will be generated by JavaScript -->
                    </div>
                </div>

                <div id="statsContent" class="tab-content">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label" data-i18n="leaderboard.totalGames">ì´ í”Œë ˆì´</div>
                            <div class="stat-big-value" id="totalGames">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label" data-i18n="leaderboard.totalFloors">ì´ ì¸µìˆ˜</div>
                            <div class="stat-big-value" id="totalFloors">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label" data-i18n="leaderboard.avgFloor">í‰ê·  ì¸µìˆ˜</div>
                            <div class="stat-big-value" id="avgFloor">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label" data-i18n="leaderboard.perfectTotal">ì™„ë²½ íšŸìˆ˜</div>
                            <div class="stat-big-value" id="perfectTotal">0</div>
                        </div>
                    </div>
                </div>

                <button id="leaderboardBackBtn" class="btn btn-secondary" data-i18n="skins.back">ë’¤ë¡œ</button>
            </div>
        </div>
    </div>

    <script src="js/i18n.js"></script>
    <script src="js/game-data.js"></script>
    <script src="js/sound-engine.js"></script>
    <script src="js/dopamine-effects.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Initialize i18n and load translations
        async function initI18n() {
            await i18n.loadTranslations(i18n.currentLang);
            i18n.updateUI();

            // Language selector event listeners
            const langBtn = document.getElementById('langBtn');
            const langMenu = document.getElementById('langMenu');
            const langOptions = document.querySelectorAll('.lang-option');

            langBtn.addEventListener('click', () => {
                langMenu.classList.toggle('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.language-selector')) {
                    langMenu.classList.add('hidden');
                }
            });

            langOptions.forEach(option => {
                option.addEventListener('click', async () => {
                    const lang = option.getAttribute('data-lang');
                    await i18n.setLanguage(lang);

                    langOptions.forEach(o => o.classList.remove('active'));
                    option.classList.add('active');
                    langMenu.classList.add('hidden');
                });
            });
        }

        initI18n();
    </script>

    <style>
        .sound-toggle {
            position: fixed;
            top: 12px;
            right: 52px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }
        .sound-toggle:hover { background: rgba(255,255,255,0.2); }
        .sound-toggle:active { transform: scale(0.95); }
    </style>
</body>
</html>
